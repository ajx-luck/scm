---- E:\ZW PROJECT\DEMO程序\模板\79F系列_Demo(C语言)\CMS79F123程序（C版）\LVD_Demo\LVD_Demo.c ----------------------------------------------------------------------
1:                /*-------------------------------------------
2:                功能：LVD模块演示
3:                版本：V1.0
4:                日期：2020.06.20 
5:                
6:                *本程序由 中微半导体 &应用支持部& 编写整理
7:                *公司网址 www.mcu.com.cn
8:                *技术支持QQ 3001082102  罗工
9:                            3001030138	莫工
10:               -------------------------------------------*/
11:               
12:               #include <cms.h>
13:               
14:               void main()
  0010    0000    NOP
  0011    0064    CLRWDT
15:               {
16:               	asm("nop");
17:               	asm("clrwdt");
18:               	
19:               	OSCCON = 0x71;			//内部振荡器用作系统时钟
  0012    3071    LDIA	0x71
  0013    1683    SETB	0x3,5
  0014    1303    CLRB	0x3,6
  0015    008F    LD	0xF,A
20:               	OPTION_REG = 0;			//预分频寄存器设置	
  0016    0181    CLR	0x1
21:               		
22:               	LVDCON = 0x07;			//LVD电压设定3.0V,使能LVD
  0017    3007    LDIA	0x7
  0018    0097    LD	0x17,A
23:               	INTCON = 0xC0;			//允许所有未被屏蔽的中断、允许外设中断	
  0019    30C0    LDIA	0xC0
  001A    008B    LD	0xB,A
24:               	PIE2 = 0x01;			//允许LVD中断
  001B    3001    LDIA	0x1
  001C    008D    LD	0xD,A
25:               //---------------------------------------		
26:               
27:               	while(1)			
  001D    0064    CLRWDT
  001E    281D    JP	0x1D
28:               	{
29:               		asm("clrwdt");
30:               	}
31:               }
32:               
33:               /***********************************************
34:               函数名称：LVD_Isr
35:               函数功能：LVD中断服务
36:               入口参数：无
37:               出口参数：无
38:               备注：
39:               ************************************************/
40:               void interrupt LVD_Isr()
41:               {
42:               	if(LVDIF)//VDD < LVD设定电压值(3.0V)
  001F    1283    CLRB	0x3,5
  0020    1303    CLRB	0x3,6
  0021    180D    SZB	0xD,0
43:               	{
44:               		LVDIF = 0;			//清中断标志		
  0022    100D    CLRB	0xD,0
  0023    0871    LD	A,0x71
  0024    008A    LD	0xA,A
  0025    0E70    SWAPA	0x70
  0026    0083    LD	0x3,A
  0027    0EFE    SWAPR	0x7E
  0028    0E7E    SWAPA	0x7E
  0029    0009    RETI
45:               	}
46:               }
---- stringtab ------------------------------------------------------------------
---- reset_enter ------------------------------------------------------------------
  0000    118A    CLRB	0xA,3
  0001    280B    JP	0xB
  000B    118A    CLRB	0xA,3
  000C    280D    JP	0xD
---- start_initialization ------------------------------------------------------------------
---- interrupt_function_enter ----------------------------------------------------------
  0004    00FE    LD	0x7E,A
  0005    0E03    SWAPA	0x3
  0006    00F0    LD	0x70,A
  0007    080A    LD	A,0xA
  0008    00F1    LD	0x71,A
  0009    118A    CLRB	0xA,3
  000A    281F    JP	0x1F
---- common_function ------------------------------------------------------------------
  000D    0183    CLR	0x3
  000E    118A    CLRB	0xA,3
  000F    2810    JP	0x10
